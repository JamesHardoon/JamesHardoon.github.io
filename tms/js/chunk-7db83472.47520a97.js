(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7db83472","chunk-2d0de953","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953"],{"2dab":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-date-picker",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},r=[],n=i("caaf"),l=i.n(n),o={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?l()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?l()(e,this.dateFormat):null}},methods:{moment:l.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},s=o,c=i("cba8"),u=Object(c["a"])(s,a,r,!1,null,null,null);t["default"]=u.exports},"5dc7":function(e,t,i){"use strict";i("7ec6")},6212:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{title:e.title,width:"900px",visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",footer:null,wrapClassName:"custom-modal",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[i("a-form-model",{ref:"ruleForm",staticStyle:{margin:"20px"},attrs:{model:e.form,layout:e.vertical,rules:e.rules}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.ClickItem.freeState,expression:"ClickItem.freeState === 1"}],staticClass:"allStatus beConfirm"},[i("span",[e._v("状态：待确认")]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.isFreeConfirm,expression:"isFreeConfirm"}]})]),i("div",{directives:[{name:"show",rawName:"v-show",value:3===e.ClickItem.freeState,expression:"ClickItem.freeState === 3"}],staticClass:"allStatus Confirm"},[e._v("\n      状态：通过\n    ")]),i("a-form-model-item",{attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{attrs:{label:"减免类型",prop:"freeReductionId"}},[i("a-select",{staticStyle:{width:"360px","margin-right":"80px"},attrs:{disabled:"",placeholder:"请选择减免类型"},model:{value:e.form.freeReductionId,callback:function(t){e.$set(e.form,"freeReductionId",t)},expression:"form.freeReductionId"}},e._l(e.selectList,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.reliefTypeName))])})),1)],1),i("a-form-model-item",{staticStyle:{width:"360px"},attrs:{label:"减免金额",prop:"freeMoney"}},[i("a-input",{attrs:{disabled:"",suffix:"元"},model:{value:e.form.freeMoney,callback:function(t){e.$set(e.form,"freeMoney",t)},expression:"form.freeMoney"}})],1)],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-10px"},attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{staticStyle:{width:"360px","margin-right":"80px"},attrs:{prop:"billNo",label:"服务费单号"}},[i("a-input",{attrs:{disabled:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1),i("a-form-model-item",{staticStyle:{width:"360px"},attrs:{label:"项目"}},[i("a-input",{attrs:{disabled:""},model:{value:e.freeItem.projectName,callback:function(t){e.$set(e.freeItem,"projectName",t)},expression:"freeItem.projectName"}})],1)],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-10px"},attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{staticStyle:{width:"360px","margin-right":"80px"},attrs:{label:"供应商"}},[i("a-input",{attrs:{disabled:""},model:{value:e.freeItem.supplierName,callback:function(t){e.$set(e.freeItem,"supplierName",t)},expression:"freeItem.supplierName"}})],1),i("a-form-model-item",{staticStyle:{width:"360px"},attrs:{label:"核算周期"}},[i("a-input",{attrs:{disabled:""},model:{value:e.freeItem.accounting,callback:function(t){e.$set(e.freeItem,"accounting",t)},expression:"freeItem.accounting"}})],1)],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-10px"},attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{staticStyle:{width:"360px"},attrs:{label:"理论应收服务费"}},[i("a-input",{attrs:{disabled:"",suffix:"元"},model:{value:e.freeItem.theoreticalReceivableMoney,callback:function(t){e.$set(e.freeItem,"theoreticalReceivableMoney",t)},expression:"freeItem.theoreticalReceivableMoney"}})],1),i("a-form-model-item",{staticStyle:{display:"flex","padding-top":"28px","align-items":"center","margin-left":"10px"},attrs:{label:""}})],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-10px"},attrs:{label:"备注"}},[i("a-input",{staticStyle:{width:"800px",height:"90px"},attrs:{maxLength:100,disabled:"",placeholder:"文字限制输入在100字以内",type:"textarea"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),i("a-form-model-item",{attrs:{label:"附件"}},[i("a-upload",{attrs:{name:"file",beforeUpload:e.beforeUpload,multiple:!0,accept:".pdf,.jpg,.doc,docx",customRequest:e.downloadFilesCustomRequest,"file-list":e.fileList,remove:e.removeFile},on:{change:e.handleChange}})],1)],1),i("div",{staticClass:"btn-group",staticStyle:{height:"30px",padding:"25px"}},[i("a-button",{directives:[{name:"show",rawName:"v-show",value:e.isFreeConfirm,expression:"isFreeConfirm"}],attrs:{type:"primary",loading:e.loading},on:{click:e.aggree}},[e._v("\n      通过\n    ")]),i("a-button",{directives:[{name:"show",rawName:"v-show",value:e.isFreeConfirm,expression:"isFreeConfirm"}],staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.unaggree}},[e._v("\n      驳回\n    ")]),i("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"cancel"},on:{click:e.handleCancel}},[e._v("\n      取消\n    ")])],1),i("Serviceaddfree",{ref:"modalForm",on:{confirmAddItem:e.confirmAddItem}}),i("a-modal",{attrs:{title:"提示",visible:e.visibleModel},on:{ok:e.cancelSignModalOk,cancel:e.cancelSignModal}},[i("p",[i("span",[e._v("不通过原因：")]),i("a-textarea",{attrs:{placeholder:"请输入不通过原因","auto-size":{minRows:3,maxRows:5}},model:{value:e.confirmContent,callback:function(t){e.confirmContent=t},expression:"confirmContent"}})],1)])],1)},r=[],n=i("0fea"),l=i("85ee"),o=i.n(l),s=(i("ca00"),i("2dab")),c=i("fa52");function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f={name:"ServiceAdd",components:{JDate:s["default"],Serviceaddfree:c["default"]},data:function(){var e;return e={isFreeConfirm:!1,ImagesUrl:window._CONFIG["domianURL"]+"/sys/common/static/",ClickItem:{},selectList:[],freeItem:{accounting:""},visibleModel:!1,confirmContent:"",uploadList:[],fileList:[],vertical:"vertical",form:this.$form.createForm(this),title:"操作",width:800,visible:!1,loading:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{},url:{add:"/servicefree/serviceFreeMaintain/add",edit:"/servicefree/serviceFreeMaintain/edit"}},u(e,"labelCol",{span:4}),u(e,"wrapperCol",{span:14}),u(e,"other",""),u(e,"form",{freeReductionId:"",freeMoney:"",billNo:"",remarks:"",fileList:[]}),u(e,"rules",{freeReductionId:[{required:!0,message:"请选择减免类型",trigger:"blur"}],freeMoney:[{required:!0,message:"请选择减免金额",trigger:"blur"},{type:"number",message:"仅支持输入小数点后两位",trigger:"blur",transform:function(e){if(e){var t=Number(e);return!!/^\d+\.?\d{0,2}$/.test(t)&&t}}}],billNo:[{required:!0,message:"请选择服务费单号",trigger:"blur"}],projectName:[{required:!0,message:"请选择服务费单号",trigger:"blur"}],supplierName:[{required:!0,message:"请选择服务费单号",trigger:"blur"}]}),e},created:function(){},watch:{visible:function(e){e&&this.getSelectList()}},methods:{aggree:function(){var e=this;if(!this.loading){var t={id:this.ClickItem.id};this.loading=!0,Object(n["k"])("/servicefree/serviceFreeMaintain/confirm_pass",t).then((function(t){t.success&&(e.visible=!1,e.$message.success("操作成功！"),e.$emit("ok"),e.loading=!1)})).finally((function(){}))}},getSelectList:function(){var e=this;Object(n["c"])("/basicdata/serviceFreeReduction/queryList").then((function(t){t.success&&t.result&&(e.selectList=t.result)}))},confirmAddItem:function(e){this.freeItem=e,this.form.billNo=e.billNo,this.form.billId=e.id,this.freeItem.accounting=this.freeItem.accountingYear+"年Q"+this.freeItem.accountingQuarter+"季度"},cancelSignModalOk:function(){var e=this;if(!this.noloading){var t={id:this.ClickItem.id,confirmRemarks:this.confirmContent};this.noloading=!0,Object(n["k"])("/servicefree/serviceFreeMaintain/confirm_no_pass",t).then((function(t){t.success&&(e.visibleModel=!1,setTimeout((function(){e.visible=!1,e.$message.success("操作成功！"),e.$emit("ok"),e.loading=!1}),1e3))})).finally((function(){}))}},cancelSignModal:function(){this.visibleModel=!1},unaggree:function(){this.visibleModel=!0},clickPlus:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="添加服务费账单",this.$refs.modalForm.disableSubmit=!1},handleChange:function(e){e.file.status,"done"===e.file.status?this.$message.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&this.$message.error("".concat(e.file.name," file upload failed."))},removeFile:function(e,t){var i=this.fileList,a=this.uploadList;i.forEach((function(t,r){t===e&&(i.splice(r,1),a.splice(r,1))})),this.fileList=i},downloadFilesCustomRequest:function(e){},beforeUpload:function(e,t){var i=this,a="/sys/common/upload",r=new FormData;r.append("biz","servicefree"),r.append("file",e),Object(n["l"])(a,r).then((function(e){if(e.success){i.uploadList.push({enclosurePath:e.message,enclosureName:e.result});var t=i.fileList.length;i.fileList.push({uid:t+1,name:e.result,status:"done",url:i.ImagesUrl+e.message})}})).finally((function(){}))},add:function(){this.edit({})},edit:function(e){var t=this;this.ClickItem=e,this.isFreeConfirm=!!e.isFreeConfirm,this.form.freeReductionId=e.freeReductionId,this.form.freeMoney=e.freeMoney,this.form.billNo=e.billNo,this.form.remarks=e.remarks,this.form.id=e.id,this.freeItem.projectName=e.projectName,this.freeItem.supplierName=e.supplierName,e.accountingYear&&(this.freeItem.accounting=e.accountingYear+"年Q"+e.accountingQuarter+"季度"),this.freeItem.theoreticalReceivableMoney=e.theoreticalReceivableMoney,this.visible=!0,this.fileList=[];var i=[];this.uploadList=e.fileList,e.fileList&&e.fileList.forEach((function(e,a){i.push({uid:a+1,name:e.enclosureName,status:"done",url:t.ImagesUrl+e.enclosurePath})})),this.fileList=i},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.ruleForm.validate((function(i){if(!i)return!1;t.confirmLoading=!0;var a="",r="";t.form.id?(a+=t.url.edit,r="put"):(a+=t.url.add,r="post"),e.form.fileList=e.uploadList,Object(n["h"])(a,e.form,r).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()},popupCallback:function(e){this.form.setFieldsValue(o()(e,"billId","freeReductionId","freeMoney","remarks","freeState","createBy","createTime","updateBy","updateTime","isDelete"))}}},m=f,d=(i("8ce1"),i("5dc7"),i("cba8")),h=Object(d["a"])(m,a,r,!1,null,"bcf0f5c8",null);t["default"]=h.exports},"7ec6":function(e,t,i){},"85ee":function(e,t,i){(function(t){var i=1/0,a=9007199254740991,r="[object Arguments]",n="[object Function]",l="[object GeneratorFunction]",o="[object Symbol]",s="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=s||c||Function("return this")();function f(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function m(e,t){var i=-1,a=e?e.length:0,r=Array(a);while(++i<a)r[i]=t(e[i],i,e);return r}function d(e,t){var i=-1,a=t.length,r=e.length;while(++i<a)e[r+i]=t[i];return e}var h=Object.prototype,p=h.hasOwnProperty,b=h.toString,g=u.Symbol,v=h.propertyIsEnumerable,y=g?g.isConcatSpreadable:void 0,k=Math.max;function w(e,t,i,a,r){var n=-1,l=e.length;i||(i=S),r||(r=[]);while(++n<l){var o=e[n];t>0&&i(o)?t>1?w(o,t-1,i,a,r):d(r,o):a||(r[r.length]=o)}return r}function x(e,t){return e=Object(e),C(e,t,(function(t,i){return i in e}))}function C(e,t,i){var a=-1,r=t.length,n={};while(++a<r){var l=t[a],o=e[l];i(o,l)&&(n[l]=o)}return n}function I(e,t){return t=k(void 0===t?e.length-1:t,0),function(){var i=arguments,a=-1,r=k(i.length-t,0),n=Array(r);while(++a<r)n[a]=i[t+a];a=-1;var l=Array(t+1);while(++a<t)l[a]=i[a];return l[t]=n,f(e,this,l)}}function S(e){return L(e)||N(e)||!!(y&&e&&e[y])}function F(e){if("string"==typeof e||q(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function N(e){return M(e)&&p.call(e,"callee")&&(!v.call(e,"callee")||b.call(e)==r)}var L=Array.isArray;function j(e){return null!=e&&R(e.length)&&!$(e)}function M(e){return _(e)&&j(e)}function $(e){var t=O(e)?b.call(e):"";return t==n||t==l}function R(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function O(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){return!!e&&"object"==typeof e}function q(e){return"symbol"==typeof e||_(e)&&b.call(e)==o}var A=I((function(e,t){return null==e?{}:x(e,m(w(t,1),F))}));e.exports=A}).call(this,i("2409"))},"8ce1":function(e,t,i){"use strict";i("f467")},f467:function(e,t,i){}}]);