(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b180208","chunk-2d0de953","chunk-ff5d6094","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953"],{"0c69":function(e,t,i){"use strict";i("35e5")},"2dab":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-date-picker",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},a=[],r=i("caaf"),o=i.n(r),c={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?o()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?o()(e,this.dateFormat):null}},methods:{moment:o.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},l=c,s=i("cba8"),u=Object(s["a"])(l,n,a,!1,null,null,null);t["default"]=u.exports},"35e5":function(e,t,i){},"85ee":function(e,t,i){(function(t){var i=1/0,n=9007199254740991,a="[object Arguments]",r="[object Function]",o="[object GeneratorFunction]",c="[object Symbol]",l="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,u=l||s||Function("return this")();function d(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function m(e,t){var i=-1,n=e?e.length:0,a=Array(n);while(++i<n)a[i]=t(e[i],i,e);return a}function f(e,t){var i=-1,n=t.length,a=e.length;while(++i<n)e[a+i]=t[i];return e}var v=Object.prototype,p=v.hasOwnProperty,h=v.toString,y=u.Symbol,g=v.propertyIsEnumerable,b=y?y.isConcatSpreadable:void 0,x=Math.max;function k(e,t,i,n,a){var r=-1,o=e.length;i||(i=S),a||(a=[]);while(++r<o){var c=e[r];t>0&&i(c)?t>1?k(c,t-1,i,n,a):f(a,c):n||(a[a.length]=c)}return a}function w(e,t){return e=Object(e),N(e,t,(function(t,i){return i in e}))}function N(e,t,i){var n=-1,a=t.length,r={};while(++n<a){var o=t[n],c=e[o];i(c,o)&&(r[o]=c)}return r}function C(e,t){return t=x(void 0===t?e.length-1:t,0),function(){var i=arguments,n=-1,a=x(i.length-t,0),r=Array(a);while(++n<a)r[n]=i[t+n];n=-1;var o=Array(t+1);while(++n<t)o[n]=i[n];return o[t]=r,d(e,this,o)}}function S(e){return _(e)||M(e)||!!(b&&e&&e[b])}function I(e){if("string"==typeof e||A(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function M(e){return q(e)&&p.call(e,"callee")&&(!g.call(e,"callee")||h.call(e)==a)}var _=Array.isArray;function $(e){return null!=e&&T(e.length)&&!R(e)}function q(e){return F(e)&&$(e)}function R(e){var t=j(e)?h.call(e):"";return t==r||t==o}function T(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function F(e){return!!e&&"object"==typeof e}function A(e){return"symbol"==typeof e||F(e)&&h.call(e)==c}var P=C((function(e,t){return null==e?{}:w(e,m(k(t,1),I))}));e.exports=P}).call(this,i("2409"))},8823:function(e,t,i){"use strict";i("9c40")},"8cc9":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{title:e.title,width:"65%",visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",okText:e.okTextTit,cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[i("a-form-model",{ref:"ruleForm",staticStyle:{"padding-left":"30px"},attrs:{model:e.form,layout:e.vertical}},[i("a-form-model-item",{attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"20px"},attrs:{label:"发票代码",prop:"freeReductionId"}},[i("a-input",{attrs:{disabled:""},model:{value:e.form.invoiceCode,callback:function(t){e.$set(e.form,"invoiceCode",t)},expression:"form.invoiceCode"}})],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"20px"},attrs:{label:"发票号码",prop:"freeReductionId"}},[i("a-input",{attrs:{disabled:""},model:{value:e.form.invoiceNumber,callback:function(t){e.$set(e.form,"invoiceNumber",t)},expression:"form.invoiceNumber"}})],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"20px"},attrs:{label:"发票名称",prop:"freeReductionId"}},[i("a-input",{attrs:{disabled:""},model:{value:e.form.invoiceName,callback:function(t){e.$set(e.form,"invoiceName",t)},expression:"form.invoiceName"}})],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"20px"},attrs:{label:"开票时间",prop:"freeReductionId"}},[i("a-input",{attrs:{disabled:""},model:{value:e.form.invoiceTime,callback:function(t){e.$set(e.form,"invoiceTime",t)},expression:"form.invoiceTime"}})],1),i("a-form-model-item",{staticStyle:{width:"180px"},attrs:{label:"发票金额",prop:"freeMoney"}},[i("a-input",{attrs:{disabled:"",suffix:"元"},model:{value:e.form.invoiceMoney,callback:function(t){e.$set(e.form,"invoiceMoney",t)},expression:"form.invoiceMoney"}})],1)],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-20px"},attrs:{label:""}},[i("a",{on:{click:e.addRow}},[e._v("添加行")])]),e._l(e.serviceReturnsList,(function(t,n){return i("a-form-model-item",{key:n,staticStyle:{"margin-top":"-10px"},attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{prop:"billNo",label:"服务费单号"}},[i("a-input-search",{staticStyle:{height:"32px"},attrs:{placeholder:"请选择服务费单号",disabled:"",size:"large"},model:{value:t.billNo,callback:function(i){e.$set(t,"billNo",i)},expression:"item.billNo"}},[i("a-button",{attrs:{slot:"enterButton"},nativeOn:{click:function(i){return i.stopPropagation(),e.clickPlus(t,n)}},slot:"enterButton"},[e._v("\n              +\n            ")])],1)],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{label:"项目"}},[i("a-input",{attrs:{disabled:""},model:{value:t.projectName,callback:function(i){e.$set(t,"projectName",i)},expression:"item.projectName"}})],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{label:"供应商"}},[i("a-input",{attrs:{disabled:""},model:{value:t.supplierName,callback:function(i){e.$set(t,"supplierName",i)},expression:"item.supplierName"}})],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{label:"核算周期"}},[i("a-input",{attrs:{disabled:""},model:{value:t.accounting,callback:function(i){e.$set(t,"accounting",i)},expression:"item.accounting"}})],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{label:"已开票金额"}},[i("a-input",{attrs:{disabled:"",suffix:"元"},model:{value:t.invoicedMoney,callback:function(i){e.$set(t,"invoicedMoney",i)},expression:"item.invoicedMoney"}})],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{label:"未开票金额"}},[i("a-input",{attrs:{disabled:"",suffix:"元"},model:{value:t.uninvoicedMoney,callback:function(i){e.$set(t,"uninvoicedMoney",i)},expression:"item.uninvoicedMoney"}})],1),i("a-form-model-item",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{label:"确认发票金额"}},[i("a-input",{attrs:{type:"number",suffix:"元"},model:{value:t.commitInvoicedMoney,callback:function(i){e.$set(t,"commitInvoicedMoney",i)},expression:"item.commitInvoicedMoney"}})],1)],1)])}))],2),i("Serviceaddfree",{ref:"modalForm",on:{confirmAddItem:e.confirmAddItem}})],1)},a=[],r=i("0fea"),o=i("85ee"),c=i.n(o),l=(i("ca00"),i("2dab")),s=i("444a");function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d={name:"ServiceAdd",components:{JDate:l["default"],Serviceaddfree:s["default"]},data:function(){var e;return e={clickIndex:0,serviceReturnsList:[{billNo:"",projectName:"",supplierName:"",accounting:"",invoicedMoney:"",uninvoicedMoney:"",commitInvoicedMoney:""}],okTextTit:"确定",ClickItem:{},freeItem:{accounting:""},visibleModel:!1,confirmContent:"",uploadList:[],fileList:[],vertical:"vertical",form:this.$form.createForm(this),title:"操作",width:800,visible:!1,loading:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{},url:{add:"/servicebill/serviceBillMaking/commitInvoice",edit:"/servicefree/serviceFreeMaintain/edit"}},u(e,"labelCol",{span:4}),u(e,"wrapperCol",{span:14}),u(e,"other",""),u(e,"form",{freeReductionId:"",freeMoney:"",billNo:"",remarks:"",fileList:[]}),u(e,"rules",{freeReductionId:[{required:!0,message:"请选择减免类型",trigger:"blur"}],freeMoney:[{required:!0,message:"请选输入免金额",trigger:"blur"},{type:"number",message:"仅支持输入小数点后两位",trigger:"blur",transform:function(e){if(e){var t=Number(e);return!!/^\d+\.?\d{0,2}$/.test(t)&&t}}}],billNo:[{required:!0,message:"请选择服务费单号",trigger:"blur"}],projectName:[{required:!0,message:"请选择服务费单号",trigger:"blur"}],supplierName:[{required:!0,message:"请选择服务费单号",trigger:"blur"}]}),e},created:function(){},watch:{},methods:{addRow:function(){this.serviceReturnsList.push({billNo:"",projectName:"",supplierName:"",accounting:"",invoicedMoney:"",uninvoicedMoney:"",commitInvoicedMoney:""}),this.clickIndex=this.serviceReturnsList.length-1},confirmAddItem:function(e){var t={billNo:e.billNo,projectName:e.projectName,id:e.id,supplierName:e.supplierName,accountingQuarter:e.accountingQuarter,accountingYear:e.accountingYear,accounting:e.accountingYear+"年Q"+e.accountingQuarter+"季度",invoicedMoney:e.invoicedMoney,uninvoicedMoney:e.uninvoicedMoney,commitInvoicedMoney:""};1===this.serviceReturnsList.length?this.$set(this.serviceReturnsList,0,t):this.$set(this.serviceReturnsList,this.clickIndex,t),this.freeItem=e,this.form.billNo=e.billNo,this.form.billId=e.id,this.freeItem.accounting=this.freeItem.accountingYear+"年Q"+this.freeItem.accountingQuarter+"季度"},clickPlus:function(e,t){this.clickIndex=t,this.$refs.modalForm.add(),this.$refs.modalForm.title="添加服务费账单",this.$refs.modalForm.disableSubmit=!1},add:function(){this.edit({})},edit:function(e){if(e.isEdit){if(this.ClickItem=e.invoice,this.form.invoiceCode=e.invoice.invoiceCode,this.form.invoiceNumber=e.invoice.invoiceNumber,this.form.invoiceName=e.invoice.invoiceName,this.form.invoiceTime=e.invoice.invoiceTime,this.form.invoiceMoney=e.invoice.invoiceMoney,e.serviceBills.forEach((function(e,t){e.accounting=e.accountingYear+"年Q"+e.accountingQuarter+"季度"})),e.serviceBills.length)for(var t=0;t<e.serviceBills.length;t++)this.$set(this.serviceReturnsList,t,e.serviceBills[t])}else if(this.ClickItem=e.invoice,this.form.invoiceCode=this.ClickItem.invoiceCode,this.form.invoiceNumber=this.ClickItem.invoiceNumber,this.form.invoiceName=this.ClickItem.invoiceName,this.form.invoiceTime=this.ClickItem.invoiceTime,this.form.invoiceMoney=this.ClickItem.invoiceMoney,e.serviceBills.length&&e.serviceBills.forEach((function(e,t){e.accounting=e.accountingYear+"年Q"+e.accountingQuarter+"季度"})),e.serviceBills.length)for(t=0;t<e.serviceBills.length;t++)this.$set(this.serviceReturnsList,t,e.serviceBills[t]);this.visible=!0},close:function(){this.$emit("close"),this.visible=!1,this.serviceReturnsList=[{billNo:"",projectName:"",supplierName:"",accounting:"",invoicedMoney:"",uninvoicedMoney:"",commitInvoicedMoney:""}]},handleOk:function(){var e=this,t=!1;if(this.serviceReturnsList.forEach((function(e,i){e.billNo||(t=!0)})),t)this.$message.warning("请填写完整！");else{var i=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;i.confirmLoading=!0;var n="",a="";i.form.id?(n+=i.url.edit,a="put"):(n+=i.url.add,a="post");var o={invoice:{invoiceCode:e.form.invoiceCode,invoiceNumber:e.form.invoiceNumber,invoiceName:e.form.invoiceName,invoiceTime:e.form.invoiceTime,invoiceMoney:e.form.invoiceMoney,id:e.ClickItem.id},serviceBills:e.serviceReturnsList};Object(r["h"])(n,o,a).then((function(t){t.success?(e.serviceReturnsList=[{billNo:"",projectName:"",supplierName:"",accounting:"",invoicedMoney:"",uninvoicedMoney:"",commitInvoicedMoney:""}],i.$message.success("确认成功！"),i.close(),i.$emit("ok")):i.$message.warning(t.message)})).finally((function(){i.confirmLoading=!1}))}))}},handleCancel:function(){this.close()},popupCallback:function(e){this.form.setFieldsValue(c()(e,"billId","freeReductionId","freeMoney","remarks","freeState","createBy","createTime","updateBy","updateTime","isDelete"))}}},m=d,f=(i("0c69"),i("cba8")),v=Object(f["a"])(m,n,a,!1,null,"6560c3ba",null);t["default"]=v.exports},"9c40":function(e,t,i){},cf2d:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-card",{attrs:{bordered:!1}},[i("div",{staticClass:"summary"},[i("div",{staticClass:"card-panel",staticStyle:{width:"45px"}},[i("span",{staticClass:"cardptit"},[e._v("合计")]),i("span",{staticClass:"number",staticStyle:{opacity:"0"}},[e._v("123123")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isTotal,expression:"isTotal == 1"}],staticClass:"card-panel"},[i("span",{staticClass:"cardptit"},[e._v("发票金额")]),i("span",{staticClass:"number"},[i("span",{staticClass:"number-text"},[e._v(" "+e._s(e.customerResult.invoiceMoney)),i("span",{staticClass:"summary-text"},[e._v("元")])])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.isTotal,expression:"isTotal == 2"}],staticClass:"card-panel"},[i("span",{staticClass:"cardptit"},[e._v(" 确认开票金额")]),i("span",{staticClass:"number"},[i("span",{staticClass:"number-text"},[e._v(" "+e._s(e.customerResult.invoiceMoney)),i("span",{staticClass:"summary-text"},[e._v("元")])])])])]),i("div",{staticClass:"table-operator"},[i("span",{directives:[{name:"show",rawName:"v-show",value:1==e.isTotal,expression:"isTotal == 1"}]},[e._v("\n      发票代码：\n      "),i("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入发票代码"},model:{value:e.queryParam.invoiceCode,callback:function(t){e.$set(e.queryParam,"invoiceCode","string"===typeof t?t.trim():t)},expression:"queryParam.invoiceCode"}}),e._v("\n\n      发票号码：\n      "),i("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入发票号码："},model:{value:e.queryParam.invoiceNumber,callback:function(t){e.$set(e.queryParam,"invoiceNumber","string"===typeof t?t.trim():t)},expression:"queryParam.invoiceNumber"}}),e._v("\n\n      发票名称：\n      "),i("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入发票代码"},model:{value:e.queryParam.invoiceName,callback:function(t){e.$set(e.queryParam,"invoiceName","string"===typeof t?t.trim():t)},expression:"queryParam.invoiceName"}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:2==e.isTotal,expression:"isTotal == 2"}]},[e._v("\n      服务费单号:\n      "),i("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入服务费单号"},model:{value:e.queryParam.billNo,callback:function(t){e.$set(e.queryParam,"billNo",t)},expression:"queryParam.billNo"}}),e._v("\n      核算周期：\n      "),i("addSelectTime",{staticStyle:{width:"150px"},on:{queryStartAccountingYear:e.queryStartAccountingYear,queryStartAccountingQuarter:e.queryStartAccountingQuarter,queryEndAccountingYear:e.queryEndAccountingYear,queryEndAccountingQuarter:e.queryEndAccountingQuarter}})],1),i("span",{directives:[{name:"show",rawName:"v-show",value:1==e.isTotal,expression:"isTotal == 1"}]},[e._v("\n      作废状态：\n      "),i("a-select",{staticStyle:{width:"120px"},attrs:{"label-in-value":"","default-value":{key:""}},on:{change:e.changeValue}},e._l(e.selectList,(function(t,n){return i("a-select-option",{key:n,attrs:{value:t.key}},[e._v(e._s(t.name))])})),1)],1),i("span",{directives:[{name:"show",rawName:"v-show",value:1==e.isTotal,expression:"isTotal == 1"}]},[e._v("\n      开票时间：\n      "),i("a-range-picker",{on:{change:e.onChangeTime}})],1),i("a-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),1==e.isTotal?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"download"},on:{click:function(t){return e.handleExportXls("发票汇总")}}},[e._v("导出")]):e._e(),2==e.isTotal?i("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"download"},on:{click:function(t){e.customerHandleExportXls("发票明细","/invoice/invoiceRegister/exportXDetailXls?invoiceId="+e.selectedRowKeys.toString())}}},[e._v("导出")]):e._e()],1),i("div",[i("a-tabs",{attrs:{"default-active-key":"1"},on:{change:e.contract_callback}},[i("a-tab-pane",{key:"1",attrs:{tab:"发票汇总"}}),i("a-tab-pane",{key:"2",attrs:{tab:"发票明细","force-render":""}})],1)],1),i("div",[i("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",bordered:"",rowKey:"id",customRow:e.onClickRowMulti,columns:e.columns,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange,getCheckboxProps:e.onGetCheckboxProps},dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"accountingYear",fn:function(t,n){return i("span",{},[i("span",[e._v(e._s(t)+"年Q"+e._s(n.accountingQuarter)+"季度")])])}},{key:"enclosurePath",fn:function(t){return[i("a",{staticClass:"uploadFiles",attrs:{title:t}},[e._v(" "+e._s(t))])]}},{key:"isNullify",fn:function(t,n){return i("span",{},[1===n.isNullify?i("a-tag",{attrs:{color:"red"}},[e._v("\n          已作废\n        ")]):e._e(),0===n.isNullify?i("a-tag",{attrs:{color:"green"}},[e._v("\n          未作废\n        ")]):e._e()],1)}},{key:"serviceChargePoints",fn:function(t,n){return i("span",{},[e._v(" "+e._s(n.serviceChargePoints)+"% ")])}},{key:"action",fn:function(t,n){return i("span",{},[i("a",{class:{isnotAllow:1===n.isNullify},on:{click:function(t){return e.paymentConfirm(n)}}},[e._v("发票确认")]),i("a",{class:{isnotAllow:1===n.isNullify},staticStyle:{"margin-left":"10px","margin-right":"10px"},on:{click:function(t){return e.editConfirm(n)}}},[e._v("修改")]),i("a",{class:{isnotAllow:1===n.isNullify,allow:0===n.isNullify},on:{click:function(t){return e.clickUpdate(n)}}},[e._v("作废")])])}}])})],1),i("ServiceConfirmModal",{ref:"ServiceConfirmModal",on:{ok:e.modalFormOk}})],1)},a=[],r=i("0fea"),o=(i("6eb7"),i("ac0d")),c=i("b65a"),l=i("a6f0"),s=i("8cc9"),u=[{title:"#",dataIndex:"",key:"rowIndex",width:40,align:"center",customRender:function(e,t,i){return parseInt(i)+1}},{title:"发票代码",align:"center",width:150,dataIndex:"invoiceCode"},{title:"发票号码",align:"center",width:150,dataIndex:"invoiceNumber"},{title:"发票名称",align:"center",width:250,dataIndex:"invoiceName"},{title:"发票金额",align:"center",width:120,dataIndex:"invoiceMoney"},{title:"开票日期",align:"center",dataIndex:"invoiceTime"},{title:"开票类型",align:"center",dataIndex:"invoiceType"},{title:"提交时间",align:"center",dataIndex:"createTime"},{title:"提交人",align:"center",dataIndex:"createByName"},{title:"修改时间",align:"center",dataIndex:"updateTime"},{title:"修改人",align:"center",dataIndex:"updateByName"},{title:"是否作废",align:"center",dataIndex:"isNullify",scopedSlots:{customRender:"isNullify"}},{title:"操作",dataIndex:"action",align:"center",width:147,scopedSlots:{customRender:"action"}}],d=[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,i){return parseInt(i)+1}},{title:"服务费单号",align:"center",width:160,dataIndex:"billNo"},{title:"供应商归属",align:"center",width:330,dataIndex:"supplierName"},{title:"项目归属",align:"center",width:180,dataIndex:"projectName"},{title:"确认开票金额",align:"center",width:150,dataIndex:"confirmInvoiceMoney"},{title:"核算周期",align:"center",dataIndex:"accountingYear",scopedSlots:{customRender:"accountingYear"}},{title:"确认时间",align:"center",dataIndex:"createTime"},{title:"确认人",align:"center",dataIndex:"createByName"}],m={name:"ContractList",mixins:[c["a"],o["b"]],components:{addSelectTime:l["default"],ServiceConfirmModal:s["default"]},data:function(){return{isTotal:1,selectList:[{key:"",name:"全部"},{key:"1",name:"已作废"},{key:"0",name:"未作废"}],description:"",contractNo:"",supplierName:"",projectName:"",effective_times:"",contractState:1,columns:u,url:{list:"/invoice/invoiceRegister/list",exportXlsUrl:"/invoice/invoiceRegister/exportXls",importExcelUrl:"contract/contractSignRegister/importExcel"},dictOptions:{}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},created:function(){},methods:{editConfirm:function(e){var t=this;if(e.isNullify)return!1;var i={invoiceId:e.id,type:2},n=this;Object(r["c"])("/invoice/invoiceRegister/updateInvoice",i).then((function(e){e.success?(e.result.isEdit=!0,t.$refs.ServiceConfirmModal.edit(e.result),t.$refs.ServiceConfirmModal.title="发票确认修改",t.$refs.ServiceConfirmModal.disableSubmit=!1):n.$message.warning(e.message)})).finally((function(){}))},paymentConfirm:function(e){var t=this;if(e.isNullify)return!1;var i={invoiceId:e.id,type:1},n=this;Object(r["c"])("/invoice/invoiceRegister/updateInvoice",i).then((function(e){e.success?(t.$refs.ServiceConfirmModal.edit(e.result),t.$refs.ServiceConfirmModal.title="发票确认",t.$refs.ServiceConfirmModal.disableSubmit=!1):n.$message.warning(e.message)})).finally((function(){}))},clickUpdate:function(e){if(e.isNullify)return!1;var t=this;this.$confirm({title:"提示",content:"您确定作废么？",onOk:function(){var i={invoiceId:e.id,type:3};Object(r["c"])("/invoice/invoiceRegister/updateInvoice",i).then((function(e){e.success&&t.searchQuery()})).finally((function(){}))},onCancel:function(){}})},onGetCheckboxProps:function(e){return{props:{disabled:1===e.isNullify}}},onClickRowMulti:function(e){var t=this;return{on:{click:function(){var i=t.selectedRowKeys;if(1===e.isNullify)return!1;i.length>0&&i.includes(e.id)?i.splice(i.indexOf(e.id),1):i.push(e.id),t.selectedRowKeys=i}}}},onChangeTime:function(e,t){this.queryParam.queryStartTime=t[0],this.queryParam.queryEndTime=t[1]},changeValue:function(e){this.queryParam.isNullify=e.key},handleMyType:function(e){var t=this,i={id:e.id};Object(r["c"])("/servicefree/serviceFreeMaintain/queryById",i).then((function(e){3===t.contractState?(e.result.isFreeConfirm=!1,t.$refs.ServiceFreeConfirm.edit(e.result),t.$refs.ServiceFreeConfirm.title="固定金额减免详情",t.$refs.ServiceFreeConfirm.disableSubmit=!1):(t.$refs.serviceFreeModal.edit(e.result),t.$refs.serviceFreeModal.title="固定金额减免详情",t.$refs.serviceFreeModal.disableSubmit=!1)})).finally((function(){}))},effectiveChange:function(e,t){this.effective_times=t},handle_add:function(){this.$router.push({name:"addNews"})},contract_callback:function(e){this.isTotal=e,this.contractState=Number(e),"1"===e?(this.url.list="/invoice/invoiceRegister/list",this.columns=u):"2"===e&&(this.queryParam.invoiceId=this.selectedRowKeys.toString(),this.columns=d,this.url.list="/invoice/invoiceRegister/invoiceDetail",this.selectedRowKeys=[]),this.searchQuery()},queryStartAccountingYear:function(e){this.queryParam.queryStartAccountingYear=e},queryStartAccountingQuarter:function(e){this.queryParam.queryStartAccountingQuarter=e},queryEndAccountingYear:function(e){this.queryParam.queryEndAccountingYear=e},queryEndAccountingQuarter:function(e){this.queryParam.queryEndAccountingQuarter=e},handleAddModelAdd:function(){this.$refs.serviceFreeModal.add(),this.$refs.serviceFreeModal.title="添加",this.$refs.serviceFreeModal.disableSubmit=!1}}},f=m,v=(i("8823"),i("cba8")),p=Object(v["a"])(f,n,a,!1,null,"3de1873c",null);t["default"]=p.exports}}]);