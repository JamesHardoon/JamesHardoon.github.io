(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d8f351c","chunk-2d0de953","chunk-17b1e1eb","chunk-b21abf4e","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953"],{"06c6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[a("div",[a("a-tabs",{attrs:{"default-active-key":"1"},on:{change:e.contract_callback}},[a("a-tab-pane",{key:"1",attrs:{tab:"供应商汇总"}}),a("a-tab-pane",{key:"2",attrs:{tab:"供应商明细","force-render":""}})],1)],1),a("div",{staticClass:"table-operator"},[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.isTotal,expression:"isTotal == 1"}]},[e._v("\n      项目:\n      "),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入项目名称"},model:{value:e.name,callback:function(t){e.name="string"===typeof t?t.trim():t},expression:"name"}})],1),a("span",{directives:[{name:"show",rawName:"v-show",value:2==e.isTotal,expression:"isTotal == 2"}]},[e._v("\n      供应商:\n      "),a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入供应商名称"},model:{value:e.supplierName,callback:function(t){e.supplierName="string"===typeof t?t.trim():t},expression:"supplierName"}}),e._v("\n        \n      是否签订合同:\n      "),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择状态",getPopupContainer:function(e){return e.parentNode}},model:{value:e.isSign,callback:function(t){e.isSign=t},expression:"isSign"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:0}},[e._v("是")]),a("a-select-option",{attrs:{value:1}},[e._v("否")])],1),e._v("\n      是否停用:\n      "),a("a-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择状态",getPopupContainer:function(e){return e.parentNode}},model:{value:e.isFrozen,callback:function(t){e.isFrozen=t},expression:"isFrozen"}},[a("a-select-option",{attrs:{value:""}},[e._v("全部")]),a("a-select-option",{attrs:{value:0}},[e._v("否")]),a("a-select-option",{attrs:{value:1}},[e._v("是")])],1)],1),a("a-upload",{directives:[{name:"show",rawName:"v-show",value:2==e.isTotal,expression:"isTotal == 2"}],attrs:{name:"file",showUploadList:!1,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[a("a-button",{staticClass:"btn-search",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"import"}},[e._v("导入")])],1),a("a-button",{directives:[{name:"show",rawName:"v-show",value:2==e.isTotal,expression:"isTotal == 2"}],staticClass:"btn-search",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"download"},on:{click:function(t){return e.handleExportXls("供应商维护报表")}}},[e._v("导出")]),a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"search"},on:{click:e.handle_query}},[e._v("查询")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:1==e.isTotal,expression:"isTotal == 1"}],staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.syncData}},[e._v("同步至金蝶")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:1==e.isTotal,expression:"isTotal == 1"}],staticStyle:{"margin-left":"10px",position:"relative"},attrs:{type:"primary"},on:{click:e.viewException}},[e._v("\n      查看异常\n      "),a("a-badge",{staticStyle:{position:"absolute",top:"-13px",right:"-13px"},attrs:{count:e.exceptionCount}})],1)],1),a("div",[1==e.isTotal?a("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",bordered:"",rowKey:"id",columns:e.summary,customRow:e.onClickRow,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading,rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"htmlSlot",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t)}})]}},{key:"isFrozen",fn:function(t){return a("span",{},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t,expression:"text === 0"}]},[e._v("否")]),a("span",{directives:[{name:"show",rawName:"v-show",value:1===t,expression:"text === 1"}]},[e._v("是")])])}},{key:"isSign",fn:function(t){return a("span",{},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t,expression:"text === 0"}]},[e._v("是")]),a("span",{directives:[{name:"show",rawName:"v-show",value:1===t,expression:"text === 1"}]},[e._v("否")])])}},{key:"action",fn:function(t,n){return a("span",{},[a("a",{on:{click:function(t){return e.handleEdit(n)}}},[e._v("查看")])])}}],null,!1,3200284158)}):a("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",bordered:"",rowKey:"id",scroll:{x:2e3},columns:e.settlementDetails,customRow:e.onClickRow,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"htmlSlot",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t)}})]}},{key:"name",fn:function(e){return a("span",{},[a("j-ellipsis",{attrs:{value:e,length:20}})],1)}},{key:"isFrozen",fn:function(t){return a("span",{},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t,expression:"text === 0"}]},[e._v("否")]),a("span",{directives:[{name:"show",rawName:"v-show",value:1===t,expression:"text === 1"}]},[e._v("是")])])}},{key:"isSign",fn:function(t){return a("span",{},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t,expression:"text === 0"}]},[e._v("是")]),a("span",{directives:[{name:"show",rawName:"v-show",value:1===t,expression:"text === 1"}]},[e._v("否")])])}},{key:"isPush",fn:function(t){return a("span",{},[a("span",{directives:[{name:"show",rawName:"v-show",value:0===t,expression:"text === 0"}]},[e._v("是")]),a("span",{directives:[{name:"show",rawName:"v-show",value:1===t,expression:"text === 1"}]},[e._v("否")])])}},{key:"action1",fn:function(t,n){return a("span",{},[a("a",{staticStyle:{"margin-right":"10px"},on:{click:function(t){return e.handleEdit(n)}}},[e._v("查看联系人")]),a("a",{on:{click:function(t){return e.EditSupper(n)}}},[e._v("修改")])])}}])})],1),a("BaseEditModal",{ref:"BaseEditModal",on:{ok:e.modalFormOk}}),a("baseSupplier-modal",{ref:"modalForm",on:{ok:e.modalFormOk}}),a("ViewException",{ref:"ViewException",on:{eRefresh:e.eRefresh}})],1)},i=[],r=a("0fea"),s=(a("6eb7"),a("ac0d")),o=a("b65a"),c=a("f1206"),l=a("304e"),u=a("d579"),d=a("0d1a"),m={name:"BaseSupplierList",mixins:[o["a"],s["b"]],components:{BaseSupplierModal:c["default"],JEllipsis:u["default"],BaseEditModal:l["default"],ViewException:d["default"]},data:function(){return{isMyId:!1,description:"BASE_SUPPLIER管理页面",name:"",supplierName:"",isSign:null,isFrozen:null,isTotal:1,exceptionCount:0,settlementDetails:[{title:"供应商",align:"center",dataIndex:"name",ellipsis:!0,scopedSlots:{customRender:"name"}},{title:"SPD编码",align:"center",dataIndex:"code"},{title:"是否停用",align:"center",dataIndex:"isFrozen",scopedSlots:{customRender:"isFrozen"}},{title:"是否签订合同",align:"center",dataIndex:"isSign",scopedSlots:{customRender:"isSign"}},{title:"是否推送",align:"center",dataIndex:"isPush",scopedSlots:{customRender:"isPush"}},{title:"供应商纳税登记号",align:"center",dataIndex:"taxRegistrationNumber"},{title:"联系邮箱",align:"center",dataIndex:"email"},{title:"开户银行",align:"center",dataIndex:"bankName"},{title:"银行账号",align:"center",dataIndex:"bankAccount"},{title:"开户名称",align:"center",dataIndex:"accountName"},{title:"开户地址",align:"center",dataIndex:"accountAddress"},{title:"开户电话",align:"center",dataIndex:"accountTel"},{title:"操作",dataIndex:"action",align:"center",width:147,fixed:"right",scopedSlots:{customRender:"action1"}}],summary:[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"项目",align:"center",dataIndex:"name"},{title:"应同步供应商",align:"center",dataIndex:"numShould"},{title:"实际步供应商",align:"center",dataIndex:"numActual"},{title:"同步时间",align:"center",dataIndex:"receiveTime"}],columns:[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"项目",align:"center",dataIndex:"name"},{title:"应同步供应商",align:"center",dataIndex:"numShould"},{title:"实际步供应商",align:"center",dataIndex:"numActual"},{title:"同步时间",align:"center",dataIndex:"receiveTime"}],url:{list:"/basicdata/baseSupplier/list",delete:"/basicdata/baseSupplier/delete",deleteBatch:"/basicdata/baseSupplier/deleteBatch",pushSupplier:"/jd/pushSupplier",forcePushSupplier:"/jd/forcePushSupplier",excepetionList:"/jd/jdSupplier/list",exportXlsUrl:"/basicdata/baseSupplier/exportXls",importExcelUrl:"/basicdata/baseSupplier/importExcel"},dictOptions:{}}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},created:function(){this.getExceptionCount()},methods:{getExceptionCount:function(){var e=this,t=this;Object(r["c"])("/jd/jdSupplier/list",{}).then((function(a){a.success?t.exceptionCount=a.result.total:e.$message.error(a.message)})).finally((function(){}))},eRefresh:function(){this.$refs.ViewException.visible=!1,this.searchQuery()},syncData:function(){var e=this;if(this.selectedRowKeys.length)if(this.selectedRowKeys.length>1)this.$message.error("同步数据只能支持单个!");else{var t={projectId:this.selectedRowKeys.toString()};Object(r["c"])(this.url.pushSupplier,t).then((function(t){t.success||e.$message.error(t.message)})).finally((function(){}))}else this.$message.error("请勾选需要同步的数据!!!")},viewException:function(){this.$refs.ViewException.visible=!0},edit_supplier:function(){this.$refs.BaseEditModal.edit(this.selectionRows[0])},EditSupper:function(e){this.$refs.BaseEditModal.edit(e)},onClickRow:function(e){var t=this;return{on:{click:function(){var a=[];a.push(e.id),t.selectedRowKeys=a}}}},initDictConfig:function(){},handle_query:function(){this.queryParam.name=this.name,this.queryParam.supplierName=this.supplierName,this.queryParam.isSign=this.isSign,this.queryParam.isFrozen=this.isFrozen,this.searchQuery()},contract_callback:function(e){this.isTotal=e,1===Number(e)?(this.selectedRowKeys=[],this.queryParam.projectId="",this.url.list="/basicdata/baseSupplier/list"):(this.url.list="/basicdata/baseSupplier/supplierlist",this.queryParam.projectId=this.selectedRowKeys[0]),this.searchQuery()},changeSelect:function(e){}}},p=m,h=(a("9cb1"),a("cba8")),f=Object(h["a"])(p,n,i,!1,null,"0b2c41d9",null);t["default"]=f.exports},"096b":function(e,t,a){},"0d1a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{staticClass:"addGHt",attrs:{title:e.title,width:"70%",visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",okText:"确定",cancelText:"取消",footer:null},on:{ok:e.handleOk,cancel:e.handleCancel}},[[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[e._v("\n        异常类型:\n        "),a("a-select",{staticStyle:{width:"120px"},attrs:{"label-in-value":"","default-value":{key:""}},on:{change:e.onChange}},e._l(e.errorTypeList,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.key}},[e._v("\n            "+e._s(t.name)+"\n          ")])})),1),a("a-button",{staticClass:"btn-search",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.forceSync}},[e._v("强制同步")])],1),a("div",[a("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",bordered:"",rowKey:"id",customRow:e.onClickRowMulti,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"type",fn:function(t){return[1===t?a("div",[e._v("名称异常")]):e._e(),2===t?a("div",[e._v("税号异常")]):e._e()]}}])})],1)])]],2)},i=[],r=a("0fea"),s=(a("85ee"),a("ca00"),a("2dab")),o=(a("6eb7"),a("ac0d")),c=a("b65a"),l=a("a6f0");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={name:"ViewException",mixins:[c["a"],o["b"]],components:{JDate:s["default"],addSelectTime:l["default"]},data:function(){var e;return e={errorTypeList:[{key:"",name:"全部"},{key:"1",name:"名称异常"},{key:"2",name:"税号异常"}],visibleModel:!1,selectedRowKeys:[],form:this.$form.createForm(this),title:"查看异常",width:800,visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{}},u(e,"labelCol",{span:4}),u(e,"wrapperCol",{span:14}),u(e,"other",""),u(e,"description","CONTRACT管理页面"),u(e,"contractNo",""),u(e,"supplierName",""),u(e,"projectName",""),u(e,"effective_times",""),u(e,"contractState",1),u(e,"columns",[{title:"序号",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"异常类型",align:"center",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"SPD供应商名称",align:"center",dataIndex:"name"},{title:"金蝶税务号",align:"center",dataIndex:"jdTaxRegistrationNumber"},{title:"金蝶供应商",align:"center",dataIndex:"jdSupplierName"},{title:"纳税登记号",align:"center",dataIndex:"taxRegistrationNumber"}]),u(e,"url",{list:"/jd/jdSupplier/list",forcePushSupplier:"/jd/forcePushSupplier"}),u(e,"dictOptions",{}),e},watch:{visible:function(e){e&&this.searchQuery()}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},created:function(){},methods:{forceSync:function(){var e=this;if(this.selectedRowKeys.length){var t={ids:this.selectedRowKeys.toString()};Object(r["c"])(this.url.forcePushSupplier,t).then((function(t){t.success?(e.$message.success(t.message),e.$emit("eRefresh")):e.$message.error(t.message)})).finally((function(){}))}else this.$message.error("请勾选需要同步的数据!!!")},onChange:function(e){this.queryParam.type=e.key,this.searchQuery()},onClickRow:function(e){var t=this;return{on:{click:function(){var a=[];a.push(e.id),t.selectedRowKeys=a}}}},onClickRowMulti:function(e){var t=this;return{on:{click:function(){var a=t.selectedRowKeys;a.length>0&&a.includes(e.id)?a.splice(a.indexOf(e.id),1):a.push(e.id),t.selectedRowKeys=a}}}},onSelectChange:function(e){this.selectedRowKeys=e},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;if(this.selectedRowKeys.length){this.confirmLoading=!0;var t={};this.selectedRowKeys.forEach((function(a,n){e.dataSource.forEach((function(e,n){a===e.id&&(t=e)}))})),this.confirmLoading=!1,this.visible=!1,this.selectedRowKeys=[],this.$emit("confirmAddItem",t)}else this.$message.error("请勾选需要操作的数据!")},handleCancel:function(){this.close()},handle_query:function(e,t){this.queryParam.contractNo=this.contractNo,this.queryParam.supplierName=this.supplierName,this.queryParam.supplierName=this.supplierName,this.queryParam.queryStartTime=this.effective_times[0],this.queryParam.queryEndTime=this.effective_times[1],this.queryParam.contractState=this.contractState,this.searchQuery()}}},m=d,p=(a("3ece"),a("51f4"),a("cba8")),h=Object(p["a"])(m,n,i,!1,null,"c56adc3a",null);t["default"]=h.exports},"202d":function(e,t,a){"use strict";a("465a")},"2dab":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-date-picker",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},i=[],r=a("caaf"),s=a.n(r),o={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?s()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?s()(e,this.dateFormat):null}},methods:{moment:s.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},c=o,l=a("cba8"),u=Object(l["a"])(c,n,i,!1,null,null,null);t["default"]=u.exports},"304e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[[a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-row",[a("a-col",{staticStyle:{"font-weight":"bold","font-size":"16px"},attrs:{span:12}},[e._v("\n            基本信息：\n          ")])],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"签订供应商",prop:"name"}},[a("div",{staticStyle:{width:"360px","margin-right":"80px",display:"flex","align-items":"center"}},[a("a-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("a-icon",{staticStyle:{"margin-left":"8px"},attrs:{type:"plus"},on:{click:function(t){return e.addProject("supplier")}}}),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",size:"small"},on:{click:e.showSupplierRecords}},[e._v("记录")])],1)])],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"SPD编码",prop:""}},[a("a-input",{attrs:{disabled:""},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否停用",prop:""}},[a("a-select",{attrs:{disabled:""},model:{value:e.form.isFrozen,callback:function(t){e.$set(e.form,"isFrozen",t)},expression:"form.isFrozen"}},e._l(e.isFrozenArr,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.dictKey}},[e._v("\n                    "+e._s(t.dictValue)+"\n                  ")])})),1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"是否签订合同",prop:""}},[a("a-select",{attrs:{disabled:""},model:{value:e.form.isSign,callback:function(t){e.$set(e.form,"isSign",t)},expression:"form.isSign"}},e._l(e.isFrozenArr,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.dictKey}},[e._v("\n                    "+e._s(t.dictValue)+"\n                  ")])})),1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"联系邮箱",prop:"email"}},[a("a-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"供应商税务登记号",prop:"taxRegistrationNumber"}},[a("a-input",{model:{value:e.form.taxRegistrationNumber,callback:function(t){e.$set(e.form,"taxRegistrationNumber",t)},expression:"form.taxRegistrationNumber"}})],1)],1)],1),a("a-row",[a("a-col",{staticStyle:{"font-weight":"bold","font-size":"16px"},attrs:{span:12}},[e._v("\n            开票信息：\n          ")])],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"开票名称",prop:"invoiceType"}},[a("a-radio-group",{attrs:{name:"radioGroup","default-value":e.form.billingType},on:{change:e.radioChange}},[a("a-radio",{attrs:{value:1}},[e._v("\n                  供应商\n                ")]),a("a-radio",{attrs:{value:2}},[e._v("\n                  医院\n                ")]),a("a-radio",{attrs:{value:3}},[e._v("\n                  第三方\n                  "),a("span",[a("a-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入"},model:{value:e.form.billingName,callback:function(t){e.$set(e.form,"billingName",t)},expression:"form.billingName"}})],1)])],1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"银行账号",prop:""}},[a("a-input",{model:{value:e.form.bankAccount,callback:function(t){e.$set(e.form,"bankAccount",t)},expression:"form.bankAccount"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"开户银行",prop:""}},[a("a-select",{model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}},e._l(e.bankArr,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.id}},[e._v("\n                  "+e._s(t.bankName)+"\n                ")])})),1)],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"开户名称",prop:""}},[a("a-input",{model:{value:e.form.accountName,callback:function(t){e.$set(e.form,"accountName",t)},expression:"form.accountName"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"开户地址",prop:""}},[a("a-input",{model:{value:e.form.accountAddress,callback:function(t){e.$set(e.form,"accountAddress",t)},expression:"form.accountAddress"}})],1)],1)],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"开户电话",prop:""}},[a("a-input",{model:{value:e.form.accountTel,callback:function(t){e.$set(e.form,"accountTel",t)},expression:"form.accountTel"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-model-item",{attrs:{label:"开票方税务登记号",prop:""}},[a("a-input",{model:{value:e.form.billTaxation,callback:function(t){e.$set(e.form,"billTaxation",t)},expression:"form.billTaxation"}})],1)],1)],1)],1)],a("addSelectModal",{attrs:{title:e.myaddTitle,checkProjectId:e.checkProjectId,checkSupplerId:e.checkSupplerId,typeKinds:e.typeKinds,visble:e.isShow},on:{clicktableRowSupper:e.clicktableRowSupper,clicktableRow:e.clicktableRow,closeVisible:e.closeVisible}}),a("SupplierRecords",{ref:"SupplierRecords"})],2)},i=[],r=a("0fea"),s=a("85ee"),o=a.n(s),c=(a("ca00"),a("2dab")),l=a("caaf"),u=a.n(l),d=(a("10ef"),a("392e")),m=a("8819");function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var h={name:"BaseProjectModal",components:{JDate:c["default"],addSelectModal:d["default"],SupplierRecords:m["default"]},data:function(){var e;return e={bankArr:[],isFrozenArr:[{dictKey:0,dictValue:"是"},{dictKey:1,dictValue:"否"}],checkProjectId:"",checkSupplerId:"",typeKinds:"",isShow:!1,myaddTitle:"",contractType:!1,moment:u.a,time:"",clickItem:{},sourceData:[],form:this.$form.createForm(this),labelCol:{span:6},wrapperCol:{span:14},other:""},p(e,"form",{projectName:"",departId:"",businessPoints:"",synchronizationDay:"",synchronizationTime:"",responsiblePersonName:"",responsiblePersonPhone:"",hosptialId:""}),p(e,"rules",{projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],email:[p({required:!0,message:"请输入邮箱",trigger:"blur",pattern:/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/},"message","邮箱格式不正确")],taxRegistrationNumber:[{required:!0,message:"请输入供应商纳税登记号",trigger:"blur"}],departId:[{required:!0,message:"请选择归属供公司",trigger:"change"}],hosptialId:[{required:!0,message:"请选择归属供公司",trigger:"change"}],businessPoints:[{required:!0,message:"请输入商务合同点数",trigger:"blur"}],synchronizationDay:[{required:!0,message:"请输入天数",trigger:"blur"},{type:"number",message:"仅支持输入1-31之间的整数",trigger:"blur",transform:function(e){var t=Number(e);return!!/^[1-9]$|^[12]\d$|^3[01]$/.test(t)&&t}}],responsiblePersonName:[{required:!0,message:"请选择收费负责人名称",trigger:"blur"}],responsiblePersonPhone:[{required:!0,pattern:/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/,message:"请输入正确联系电话"}]}),p(e,"title","修改"),p(e,"width","70%"),p(e,"visible",!1),p(e,"selectedKeys",[]),p(e,"model",{}),p(e,"visibleModel",!1),p(e,"labelCol",{xs:{span:24},sm:{span:5}}),p(e,"wrapperCol",{xs:{span:24},sm:{span:16}}),p(e,"confirmLoading",!1),p(e,"validatorRules",{}),p(e,"treeData",[]),p(e,"url",{add:"/basicdata/baseProject/add",edit:"/basicdata/baseSupplier/edit"}),e},created:function(){},mounted:function(){this.dataList()},methods:{showSupplierRecords:function(){this.$refs.SupplierRecords.queryParam.supplierId=this.form.id,this.$refs.SupplierRecords.visible=!0},clicktableRowSupper:function(e){this.form.name=e.name,this.form.supplierId=e.id,this.form.taxRegistrationNumber=e.taxRegistrationNumber,this.SupperItem=e,this.supplierId=e.id,this.checkSupplerId=e.id},clicktableRow:function(e){this.form.projectName=e.name,this.form.taxRegistrationNumber=e.taxRegistrationNumber,this.projectItem=e,this.projectId=e.id,this.checkProjectId=e.id},closeVisible:function(e){this.isShow=e},addProject:function(e){this.isShow=!0,this.myaddTitle="project"===e?"添加项目":"添加供应商",this.typeKinds=e},radioChange:function(e){this.form.billingType=e.target.value,3!==e.target.value&&(this.form.billingName="")},onChangeTime:function(e){this.form.synchronizationTime=this.formatDateTime(e._d)},formatDateTime:function(e){var t=new Date(e),a=(t.getFullYear(),t.getMonth()+1);a=a<10?"0"+a:a;var n=t.getDate();n=n<10?"0"+n:n;var i=t.getHours();i=i<10?"0"+i:i;var r=t.getMinutes(),s=t.getSeconds();return r=r<10?"0"+r:r,s=s<10?"0"+s:s,i+":"+r+":"+s},onSubmit:function(){this.$refs.ruleForm.validate((function(e){if(!e)return!1;alert("submit!")}))},resetForm:function(){this.$refs.ruleForm.resetFields()},add:function(){this.edit({})},edit:function(e){this.visible=!0,this.form=e},close:function(){this.checkProjectId="",this.checkSupplerId="",this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;t.confirmLoading=!0;var n="",i="";e.form.id?(n+=e.url.edit,i="put"):(n+=e.url.add,i="post"),Object(r["h"])(n,e.form,i).then((function(e){e.success?t.$emit("ok"):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close(),this.$refs.ruleForm.resetFields(),this.form.synchronizationTime=""},popupCallback:function(e){this.form.setFieldsValue(o()(e,"name","departId","hosptialId","businessPoints","synchronizationDay","synchronizationTime","responsiblePersonName","responsiblePersonPhone"))},dataList:function(){var e=this;Object(r["c"])("/base/bank/list",null).then((function(t){t.success&&(e.bankArr=t.result)})).finally((function(){}))}}},f=h,b=a("cba8"),g=Object(b["a"])(f,n,i,!1,null,null,null);t["default"]=g.exports},"343d":function(e,t,a){},"392e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:e.title,visible:e.visible,"confirm-loading":e.confirmLoading,width:"50%"},on:{ok:e.handleOk,cancel:e.handleCancel}},[[a("div",[e._v("\n         名称: \n      "),a("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"名称"},model:{value:e.queryName,callback:function(t){e.queryName=t},expression:"queryName"}}),e._v("   \n      "),a("a-button",{staticClass:"btn-search",attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.handle_query(1,null)}}},[e._v("查询")])],1),a("a-table",{attrs:{columns:e.columns,"data-source":e.data,customRow:e.rowClick,pagination:!1,scroll:{y:240}},scopedSlots:e._u([{key:"action",fn:function(t){return a("a",{attrs:{href:"javascript:;"}},[a("a-checkbox",{on:{change:e.onChange},model:{value:t.isChecked,callback:function(a){e.$set(t,"isChecked",a)},expression:"text.isChecked"}},[e._v("\n          选择\n        ")])],1)}}])}),a("div",{staticClass:"pageAtion"},[a("a-pagination",{attrs:{size:"small",total:e.total,"page-size":e.pageSize,"show-size-changer":"","show-quick-jumper":""},on:{change:e.changePage,showSizeChange:e.changePageSize}})],1)]],2)},i=[],r=a("0fea"),s={name:"addSelect",props:{visble:null,title:null,typeKinds:null,checkProjectId:null,checkSupplerId:null},watch:{visble:function(e){this.visible=e,e&&this.getList()},queryName:function(e){this.queryName=e.replace(/(^\s*)|(\s*$)/g,"")},typeKinds:function(e){},checkProjectId:function(e){},checkSupplerId:function(e){}},data:function(){return{myCheckedItem:{},queryName:"",total:null,pageNo:1,pageSize:10,data:[],columns:[{title:"名称",dataIndex:"name",with:"auto"},{width:150,title:"选择",dataIndex:"",key:"x",scopedSlots:{customRender:"action"}}],ModalText:"Content of the modal",visible:!1,confirmLoading:!1}},methods:{onChange:function(e){},rowClick:function(e,t){var a=this;return{on:{click:function(){a.data.forEach((function(e,t){e.isChecked=!1,a.$set(a.data,t,e)})),e.isChecked=!e.isChecked,a.$set(a.data,t,e),e.isChecked&&(a.myCheckedItem=e)}}}},handle_query:function(e,t){var a=this,n={pageNo:e};n.pageSize=t||this.pageSize,n.name=this.queryName;var i="project"===this.typeKinds?"/basicdata/baseProject/getBaseProject?supplierId=".concat(this.checkSupplerId):"/basicdata/baseSupplier/getBaseSupplier?projectId=".concat(this.checkProjectId);Object(r["c"])(i,n).then((function(e){e.success&&e.result&&(a.data=e.result.records,a.total=e.result.total)}))},changePage:function(e,t){this.pageNo=e,this.pageSize=t,this.handle_query(e,t)},changePageSize:function(e,t){this.pageNo=e,this.pageSize=t,this.data=[],this.total=0,this.handle_query(e,t)},getList:function(){var e=this;this.myCheckedItem={},this.queryName="";var t="project"===this.typeKinds?"/basicdata/baseProject/getBaseProject?supplierId=".concat(this.checkSupplerId):"/basicdata/baseSupplier/getBaseSupplier?projectId=".concat(this.checkProjectId);this.pageSize=10,this.pageNo=1;var a={pageNo:this.pageNo,pageSize:this.pageSize};Object(r["c"])(t,a).then((function(t){t.success&&t.result&&(e.data=t.result.records,e.total=t.result.total)}))},close:function(){},showModal:function(){this.visible=!0},handleOk:function(e){if(!this.myCheckedItem.id)return this.$message.error("请选择！"),!1;this.$emit("closeVisible",!1),"project"===this.typeKinds?this.$emit("clicktableRow",this.myCheckedItem):this.$emit("clicktableRowSupper",this.myCheckedItem)},handleCancel:function(e){this.$emit("closeVisible",!1)}}},o=s,c=(a("202d"),a("cba8")),l=Object(c["a"])(o,n,i,!1,null,"0555d77b",null);t["default"]=l.exports},"3ece":function(e,t,a){"use strict";a("096b")},"465a":function(e,t,a){},"51f4":function(e,t,a){"use strict";a("343d")},"85ee":function(e,t,a){(function(t){var a=1/0,n=9007199254740991,i="[object Arguments]",r="[object Function]",s="[object GeneratorFunction]",o="[object Symbol]",c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")();function d(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function m(e,t){var a=-1,n=e?e.length:0,i=Array(n);while(++a<n)i[a]=t(e[a],a,e);return i}function p(e,t){var a=-1,n=t.length,i=e.length;while(++a<n)e[i+a]=t[a];return e}var h=Object.prototype,f=h.hasOwnProperty,b=h.toString,g=u.Symbol,v=h.propertyIsEnumerable,y=g?g.isConcatSpreadable:void 0,w=Math.max;function k(e,t,a,n,i){var r=-1,s=e.length;a||(a=I),i||(i=[]);while(++r<s){var o=e[r];t>0&&a(o)?t>1?k(o,t-1,a,n,i):p(i,o):n||(i[i.length]=o)}return i}function x(e,t){return e=Object(e),S(e,t,(function(t,a){return a in e}))}function S(e,t,a){var n=-1,i=t.length,r={};while(++n<i){var s=t[n],o=e[s];a(o,s)&&(r[s]=o)}return r}function C(e,t){return t=w(void 0===t?e.length-1:t,0),function(){var a=arguments,n=-1,i=w(a.length-t,0),r=Array(i);while(++n<i)r[n]=a[t+n];n=-1;var s=Array(t+1);while(++n<t)s[n]=a[n];return s[t]=r,d(e,this,s)}}function I(e){return N(e)||j(e)||!!(y&&e&&e[y])}function _(e){if("string"==typeof e||E(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}function j(e){return P(e)&&f.call(e,"callee")&&(!v.call(e,"callee")||b.call(e)==i)}var N=Array.isArray;function $(e){return null!=e&&q(e.length)&&!R(e)}function P(e){return F(e)&&$(e)}function R(e){var t=T(e)?b.call(e):"";return t==r||t==s}function q(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function F(e){return!!e&&"object"==typeof e}function E(e){return"symbol"==typeof e||F(e)&&b.call(e)==o}var O=C((function(e,t){return null==e?{}:x(e,m(k(t,1),_))}));e.exports=O}).call(this,a("2409"))},"99c0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{attrs:{title:e.title,width:e.width,visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[[a("a-form-model",{ref:"ruleForm",attrs:{model:e.form,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[a("a-form-model-item",{ref:"name",attrs:{label:"供应商：",prop:"name"}},[a("a-input",{attrs:{disabled:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e.isHow?a("a-form-model-item",{attrs:{label:"项目",prop:"projectIds"}},[a("a-select",{attrs:{mode:"multiple",placeholder:"请选择项目"},model:{value:e.form.projectIds,callback:function(t){e.$set(e.form,"projectIds",t)},expression:"form.projectIds"}},e._l(e.sourceData,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])})),1)],1):e._e(),a("a-form-model-item",{attrs:{label:"联系人",prop:"contactsName"}},[a("a-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.form.contactsName,callback:function(t){e.$set(e.form,"contactsName",t)},expression:"form.contactsName"}})],1),a("a-form-model-item",{attrs:{label:"负责内容",prop:"responsibleContent"}},[a("a-input",{attrs:{type:"textarea",maxLength:100,placeholder:"请输入负责内容"},model:{value:e.form.responsibleContent,callback:function(t){e.$set(e.form,"responsibleContent",t)},expression:"form.responsibleContent"}})],1),a("a-form-model-item",{attrs:{label:"联系电话",prop:"contactsPhone"}},[a("a-input",{attrs:{type:"tel",maxLength:11,placeholder:"请输入联系电话"},model:{value:e.form.contactsPhone,callback:function(t){e.$set(e.form,"contactsPhone",t)},expression:"form.contactsPhone"}})],1)],1)]],2)},i=[],r=a("0fea"),s=(a("85ee"),a("ca00"),a("2dab")),o=a("caaf"),c=a.n(o);a("10ef");function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var u={name:"BaseProjectModal",components:{JDate:s["default"]},data:function(){var e;return e={isHow:!0,moment:c.a,time:"",clickItem:{},sourceData:[],form:this.$form.createForm(this),labelCol:{span:4},wrapperCol:{span:14},other:""},l(e,"form",{projectIds:[],contactsName:"",responsibleContent:"",contactsPhone:"",name:""}),l(e,"rules",{projectIds:[{required:!0,message:"请选择项目",trigger:"blur"}],contactsName:[{required:!0,message:"请选择联系人",trigger:"change"}],responsibleContent:[{required:!0,message:"请输入负责内容",trigger:"change"}],businessPoints:[{required:!0,message:"请输入商务合同点数",trigger:"blur"}],contactsPhone:[{required:!0,pattern:/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/,message:"请输入正确的联系电话"},{type:"number",message:"请输入正确的联系电话",trigger:"blur",transform:function(e){if(e){var t=Number(e);return!!/^1[3456789]\d{9}$/.test(t)&&t}}}]}),l(e,"title","操作"),l(e,"width",800),l(e,"visible",!1),l(e,"selectedKeys",[]),l(e,"model",{}),l(e,"visibleModel",!1),l(e,"labelCol",{xs:{span:24},sm:{span:5}}),l(e,"wrapperCol",{xs:{span:24},sm:{span:16}}),l(e,"confirmLoading",!1),l(e,"validatorRules",{}),l(e,"treeData",[]),l(e,"url",{add:"/basicdata/supplierContacts/add",edit:"/basicdata/supplierContacts/edit"}),e},watch:{visible:function(e){e&&this.dataList()}},created:function(){},mounted:function(){this.dataList()},methods:{onChangeTime:function(e){this.form.synchronizationTime=this.formatDateTime(e._d)},formatDateTime:function(e){var t=new Date(e),a=(t.getFullYear(),t.getMonth()+1);a=a<10?"0"+a:a;var n=t.getDate();n=n<10?"0"+n:n;var i=t.getHours();i=i<10?"0"+i:i;var r=t.getMinutes(),s=t.getSeconds();return r=r<10?"0"+r:r,s=s<10?"0"+s:s,i+":"+r+":"+s},onSubmit:function(){this.$refs.ruleForm.validate((function(e){if(!e)return!1;alert("submit!")}))},resetForm:function(){this.$refs.ruleForm.resetFields()},add:function(e){this.isHow=!0,this.clickItem=e,this.form.name=e.name,this.visible=!0,this.form.contactsName="",this.form.responsibleContent="",this.form.contactsPhone="",this.form.projectIds=[],this.form.id=""},edit:function(e){this.isHow=!1,this.visible=!0,this.clickItem=e,this.form.name=e.name,this.form.contactsName=e.contactsName,this.form.responsibleContent=e.responsibleContent,this.form.contactsPhone=e.contactsPhone,this.form.id=e.id,this.form.supplierId=e.supplierId},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this,t=this;this.$refs.ruleForm.validate((function(a){if(!a)return!1;t.confirmLoading=!0;var n="",i="";e.form.id?(n+=e.url.edit,i="put"):(n+=e.url.add,i="post"),e.isHow&&(e.form.supplierId=e.clickItem.id),e.form.projectIds=e.form.projectIds.toString(),Object(r["h"])(n,e.form,i).then((function(a){a.success?(t.$message.success(a.message),t.$refs.ruleForm.resetFields(),t.form.synchronizationTime="",t.$emit("okEdit"),e.isHow=!0):t.$message.warning(a.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close(),this.$refs.ruleForm.resetFields(),this.form.synchronizationTime=""},popupCallback:function(e){},treeList:function(){var e=this;Object(r["c"])("/basicdata/baseHospital/queryTreeList",null).then((function(t){t.success&&(e.treeData=t.result)})).finally((function(){}))},dataList:function(){var e=this,t={supplierId:this.clickItem.id};Object(r["c"])("/basicdata/baseProject/getBaseProjectList",t).then((function(t){t.success&&(e.sourceData=t.result)})).finally((function(){}))},validateMobile:function(e,t,a){!t||new RegExp(/^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\d{8}$/).test(t)?a():a("您的手机号码格式不正确!")}}},d=u,m=a("cba8"),p=Object(m["a"])(d,n,i,!1,null,null,null);t["default"]=p.exports},"9cb1":function(e,t,a){"use strict";a("adb2")},adb2:function(e,t,a){},b164:function(e,t,a){},d579:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tooltip",{attrs:{placement:"topLeft"}},[a("template",{slot:"title"},[a("span",[e._v(e._s(e.value))])]),e._v("\n  "+e._s(e._f("ellipsis")(e.value,e.length))+"\n")],2)},i=[],r={name:"JEllipsis",props:{value:{type:String,required:!1},length:{type:Number,required:!1,default:25}}},s=r,o=a("cba8"),c=Object(o["a"])(s,n,i,!1,null,"4de15389",null);t["default"]=c.exports},e3a7:function(e,t,a){"use strict";a("b164")},f1206:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("j-modal",{staticClass:"addGHt",attrs:{title:"供应商联系人",width:"70%",visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",okText:"制作",footer:"",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-operator"},[a("span",{staticStyle:{"font-size":"16px"}},[e._v("供应商："+e._s(e.clickItem.name))]),a("span",[a("a-button",{attrs:{type:"primary",icon:"download"},on:{click:function(t){return e.uploadFile("template/供应商联系人导入模板.xls")}}},[e._v("下载模板")]),a("a-upload",{attrs:{name:"file",showUploadList:!1,multiple:!1,headers:e.tokenHeader,action:e.importExcelUrl},on:{change:e.handleImportExcel}},[a("a-button",{attrs:{type:"primary",icon:"import"}},[e._v("导入")])],1),a("a-button",{attrs:{type:"primary"},on:{click:e.addContact}},[e._v("\n            添加联系人\n          ")])],1)]),a("div",[a("a-table",{ref:"table",staticClass:"j-table-force-nowrap",attrs:{size:"middle",bordered:"",customRow:e.onClickRowMulti,columns:e.columns,dataSource:e.dataSource,pagination:e.ipagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"isChecked",fn:function(t,n){return a("span",{},[a("a-switch",{on:{change:function(t){return e.changeValue(n)}},model:{value:n.isChecked,callback:function(t){e.$set(n,"isChecked",t)},expression:"record.isChecked"}})],1)}},{key:"action",fn:function(t,n){return[a("span",{staticClass:"operation",on:{click:function(t){return t.stopPropagation(),e.editTable(n)}}},[e._v("修改")]),a("span",{staticClass:"operation",on:{click:function(t){return t.stopPropagation(),e.handleDelete(n.supConsProId)}}},[e._v("删除")])]}}])})],1)]),a("addContarct",{ref:"addContarct",on:{okEdit:e.okEdit}})]],2)},i=[],r=a("0fea"),s=(a("85ee"),a("ca00"),a("2dab")),o=(a("6eb7"),a("ac0d")),c=a("b65a"),l=a("99c0");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={name:"ContractModal",mixins:[c["a"],o["b"]],components:{JDate:s["default"],addContarct:l["default"]},data:function(){var e;return e={isSwitch:!0,IsSelected:!1,dataJS:[],clickItem:{},visibleModel:!1,confirmContent:"",selectedRowKeys:[],form:this.$form.createForm(this),title:"新增",width:800,visible:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{}},u(e,"labelCol",{span:4}),u(e,"wrapperCol",{span:14}),u(e,"other",""),u(e,"description","CONTRACT管理页面"),u(e,"contractNo",""),u(e,"supplierName",""),u(e,"projectName",""),u(e,"effective_times",""),u(e,"contractState",1),u(e,"columns",[{title:"#",dataIndex:"",key:"rowIndex",width:60,align:"center",customRender:function(e,t,a){return parseInt(a)+1}},{title:"联系人",align:"center",dataIndex:"contactsName"},{title:"负责项目",align:"center",dataIndex:"projectName"},{title:"负责内容",align:"center",dataIndex:"responsibleContent"},{title:"联系电话",align:"center",dataIndex:"contactsPhone"},{title:"是否接受短信",align:"center",dataIndex:"isChecked",scopedSlots:{customRender:"isChecked"}},{title:"操作",dataIndex:"action",align:"center",width:147,scopedSlots:{customRender:"action"}}]),u(e,"url",{list:"/basicdata/supplierContacts/list",delete:"/basicdata/supplierContacts/delete",exportXlsUrl:"/basicdata/supplierContacts/downLoad",importExcelUrl:"/basicdata/supplierContacts/importExcel"}),u(e,"dictOptions",{}),e},watch:{visible:function(e){}},computed:{importExcelUrl:function(){return"".concat(window._CONFIG["domianURL"],"/").concat(this.url.importExcelUrl)}},created:function(){},methods:u({okEdit:function(){this.searchQuery()},changeValue:function(e,t){var a=this;e.isChecked=!e.isChecked;var n={id:e.id,supConsProId:e.supConsProId,isReceiveSms:e.isChecked?1:0};Object(r["k"])("/basicdata/supplierContacts/edit",n).then((function(e){200===e.code&&(a.queryParam.supplierId=a.clickItem.id,a.searchQuery())}))},editTable:function(e){e.name=this.clickItem.name,e.supplierId=this.clickItem.id,this.$refs.addContarct.edit(e),this.$refs.addContarct.title="编辑"},addContact:function(){this.$refs.addContarct.title="新增联系人",this.$refs.addContarct.add(this.clickItem)},showModalJS:function(){this.visibleJS=!0},handleOkJS:function(e){this.visibleJS=!1},handleCancelJS:function(e){this.visibleJS=!1},previewState:function(e){var t=this;this.visibleJS=!0;var a={projectId:e.projectId,supplierId:e.supplierId,yearCycle:e.yearCycle,quarterCycle:e.quarterCycle};Object(r["c"])("/service_bill/detailed/query_detailed_list",a).then((function(e){e.success?t.dataJS=e.result:t.$message.error(e.message)}))},queryStartAccountingYear1:function(e){this.queryParam.queryStartAccountingYear=e},queryEndAccountingYear2:function(e){this.queryParam.queryEndAccountingYear=e},queryStartAccountingQuarter3:function(e){this.queryParam.queryStartAccountingQuarter=e},queryEndAccountingQuarter4:function(e){this.queryParam.queryEndAccountingQuarter=e},cancelSignModal:function(){this.visibleModel=!1},cancelSignModalOk:function(){var e=this;if(!this.noloading){var t={nullifyList:this.selectedRowKeys,remarks:this.confirmContent};this.noloading=!0,Object(r["i"])("/contract/addNullifyContract",t).then((function(t){t.success&&(e.visibleModel=!1,setTimeout((function(){e.visible=!1,e.$message.success("操作成功！"),e.$emit("ok"),e.loading=!1}),1e3))})).finally((function(){}))}},onClickRow:function(e){var t=this;return{on:{click:function(){var a=[];a.push(e.id),t.selectedRowKeys=a}}}},onClickRowMulti:function(e){var t=this;return{on:{click:function(){var a=t.selectedRowKeys;a.length>0&&a.includes(e.id)?a.splice(a.indexOf(e.id),1):a.push(e.id),t.selectedRowKeys=a}}}},onSelectChange:function(e){this.selectedRowKeys=e},onOk:function(e){},onSubmit:function(){this.$refs.ruleForm.validate((function(e){if(!e)return!1;alert("submit!")}))},resetForm:function(){this.$refs.ruleForm.resetFields()},add:function(){this.edit({})},edit:function(e){this.clickItem=e,this.queryParam.supplierId=e.id,this.searchQuery(),this.form.resetFields(),this.model=Object.assign({},e),this.visible=!0},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;if(this.selectedRowKeys.length){this.confirmLoading=!0;var t=[];this.selectedRowKeys.forEach((function(a,n){e.dataSource.forEach((function(e,n){a===e.id&&t.push({projectId:e.projectId,supplierId:e.supplierId,accountingYear:e.yearCycle,accountingQuarter:e.quarterCycle})}))}));var a={billList:t};Object(r["i"])("/servicebill/serviceBillMaking/add",a).then((function(t){t.success&&200===t.code?(e.confirmLoading=!1,e.visible=!1,e.$emit("ok"),e.$message.success("操作成功！")):(e.confirmLoading=!1,e.visible=!1,e.$message.error(t.message))})).finally((function(){}))}else this.$message.error("请勾选需要操作的服务费账单!")},handleCancel:function(){this.close()},preview:function(){},initDictConfig:function(){},effectiveChange:function(e,t){this.effective_times=t},handle_query:function(e,t){this.queryParam.contractNo=this.contractNo,this.queryParam.supplierName=this.supplierName,this.queryParam.supplierName=this.supplierName,this.queryParam.queryStartTime=this.effective_times[0],this.queryParam.queryEndTime=this.effective_times[1],this.queryParam.contractState=this.contractState,this.searchQuery()},handle_add:function(){this.$router.push({name:"addNews"})},contract_callback:function(e){this.contractState=e,this.handle_query()},handleAddModel:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="添加合同",this.$refs.modalForm.disableSubmit=!1}},"preview",(function(){this.$refs.modalFormDetail.add(),this.$refs.modalFormDetail.title="合同签约登记",this.$refs.modalFormDetail.disableSubmit=!1}))},m=d,p=(a("e3a7"),a("cba8")),h=Object(p["a"])(m,n,i,!1,null,"62f05645",null);t["default"]=h.exports}}]);