(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-852dbb6c","chunk-2d0de953","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-418fc05a","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953","chunk-2d0de953"],{"2dab":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-date-picker",{attrs:{disabled:e.disabled||e.readOnly,placeholder:e.placeholder,value:e.momVal,showTime:e.showTime,format:e.dateFormat,getCalendarContainer:e.getCalendarContainer},on:{change:e.handleDateChange}})},r=[],n=i("caaf"),l=i.n(n),s={name:"JDate",props:{placeholder:{type:String,default:"",required:!1},value:{type:String,required:!1},dateFormat:{type:String,default:"YYYY-MM-DD",required:!1},triggerChange:{type:Boolean,required:!1,default:!1},readOnly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},showTime:{type:Boolean,required:!1,default:!1},getCalendarContainer:{type:Function,default:function(e){return e.parentNode}}},data:function(){var e=this.value;return{decorator:"",momVal:e?l()(e,this.dateFormat):null}},watch:{value:function(e){this.momVal=e?l()(e,this.dateFormat):null}},methods:{moment:l.a,handleDateChange:function(e,t){this.$emit("change",t)}},model:{prop:"value",event:"change"}},o=s,c=i("cba8"),u=Object(c["a"])(o,a,r,!1,null,null,null);t["default"]=u.exports},5021:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("j-modal",{attrs:{title:e.title,width:"900px",visible:e.visible,confirmLoading:e.confirmLoading,switchFullscreen:"",okText:e.okTextTit,cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[i("a-form-model",{ref:"ruleForm",staticStyle:{"padding-left":"30px"},attrs:{model:e.form,layout:e.vertical,rules:e.rules}},[i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.ClickItem.freeState,expression:"ClickItem.freeState === 1"}],staticClass:"allStatus beConfirm"},[i("span",[e._v("状态：待确认")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:3===e.ClickItem.freeState,expression:"ClickItem.freeState === 3"}],staticClass:"allStatus Confirm"},[e._v("\n      状态：通过\n    ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.ClickItem.freeState,expression:"ClickItem.freeState === 2"}],staticClass:"allStatus notPass"},[i("span",[e._v("状态：未通过")]),i("span",[e._v(e._s(e.ClickItem.freeStateName))])]),2===e.ClickItem.freeState?i("div",{staticClass:"notpassDesc"},[e._v("未通过原因："+e._s(e.ClickItem.confirmRemarks||""))]):e._e(),i("a-form-model-item",{attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{attrs:{label:"减免类型",prop:"freeReductionId"}},[i("a-select",{staticStyle:{width:"360px","margin-right":"80px"},attrs:{disabled:e.isEdit,placeholder:"请选择减免类型"},model:{value:e.form.freeReductionId,callback:function(t){e.$set(e.form,"freeReductionId",t)},expression:"form.freeReductionId"}},e._l(e.selectList,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.id}},[e._v(e._s(t.reliefTypeName))])})),1)],1),i("a-form-model-item",{staticStyle:{width:"360px"},attrs:{label:"减免金额",prop:"freeMoney"}},[i("a-input",{attrs:{disabled:e.isEdit,suffix:"元"},model:{value:e.form.freeMoney,callback:function(t){e.$set(e.form,"freeMoney",t)},expression:"form.freeMoney"}})],1)],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-10px"},attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{staticStyle:{width:"360px","margin-right":"80px"},attrs:{prop:"billNo",label:"服务费单号"}},[i("a-input",{attrs:{disabled:""},model:{value:e.form.billNo,callback:function(t){e.$set(e.form,"billNo",t)},expression:"form.billNo"}})],1),i("a-form-model-item",{staticStyle:{width:"360px"},attrs:{label:"项目"}},[i("a-input",{attrs:{disabled:""},model:{value:e.freeItem.projectName,callback:function(t){e.$set(e.freeItem,"projectName",t)},expression:"freeItem.projectName"}})],1)],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-10px"},attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{staticStyle:{width:"360px","margin-right":"80px"},attrs:{label:"供应商"}},[i("a-input",{attrs:{disabled:""},model:{value:e.freeItem.supplierName,callback:function(t){e.$set(e.freeItem,"supplierName",t)},expression:"freeItem.supplierName"}})],1),i("a-form-model-item",{staticStyle:{width:"360px"},attrs:{label:"核算周期"}},[i("a-input",{attrs:{disabled:""},model:{value:e.freeItem.accounting,callback:function(t){e.$set(e.freeItem,"accounting",t)},expression:"freeItem.accounting"}})],1)],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-10px"},attrs:{label:""}},[i("div",{staticStyle:{display:"flex"}},[i("a-form-model-item",{staticStyle:{width:"360px"},attrs:{label:"理论应收服务费"}},[i("a-input",{attrs:{disabled:"",suffix:"元"},model:{value:e.freeItem.theoreticalReceivableMoney,callback:function(t){e.$set(e.freeItem,"theoreticalReceivableMoney",t)},expression:"freeItem.theoreticalReceivableMoney"}})],1),i("a-form-model-item",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],staticStyle:{display:"flex","padding-top":"28px","align-items":"center","margin-left":"10px"},attrs:{label:""}},[e.isEdit?e._e():i("a",{on:{click:e.clickPlus}},[i("a-icon",{attrs:{type:"plus"}}),e._v("添加服务费单号 ")],1)])],1)]),i("a-form-model-item",{staticStyle:{"margin-top":"-10px"},attrs:{label:"备注"}},[i("a-input",{staticStyle:{width:"800px",height:"90px"},attrs:{maxLength:100,disabled:e.isEdit,placeholder:"文字限制输入在100字以内",type:"textarea"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),i("a-form-model-item",{attrs:{label:"附件"}},[i("a-upload",{attrs:{name:"file",beforeUpload:e.beforeUpload,multiple:!0,accept:".pdf,.jpg,.png",customRequest:e.downloadFilesCustomRequest,"file-list":e.fileList,remove:e.removeFile},on:{change:e.handleChange}},[i("a-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}]},[i("a-icon",{attrs:{type:"upload"}}),e._v(" 上传文件 ")],1),i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],staticStyle:{"margin-left":"20px"}},[e._v("支持扩展名：pdf、jpg、doc、docx、文件大小不超过5M")])],1)],1)],1),i("Serviceaddfree",{ref:"modalForm",on:{confirmAddItem:e.confirmAddItem}}),i("a-modal",{attrs:{title:"提示",visible:e.visibleModel},on:{ok:e.cancelSignModalOk,cancel:e.cancelSignModal}},[i("p",[i("span",[e._v("不通过原因111：")]),i("a-textarea",{attrs:{placeholder:"请输入不通过原因","auto-size":{minRows:3,maxRows:5}},model:{value:e.confirmContent,callback:function(t){e.confirmContent=t},expression:"confirmContent"}})],1)])],1)},r=[],n=i("0fea"),l=i("85ee"),s=i.n(l),o=(i("ca00"),i("2dab")),c=i("fa52");function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f={name:"ServiceAdd",components:{JDate:o["default"],Serviceaddfree:c["default"]},data:function(){var e;return e={isEdit:!1,okTextTit:"确定",ImagesUrl:window._CONFIG["domianURL"]+"/sys/common/static/",ClickItem:{},selectList:[],freeItem:{accounting:""},visibleModel:!1,confirmContent:"",uploadList:[],fileList:[],vertical:"vertical",form:this.$form.createForm(this),title:"操作",width:800,visible:!1,loading:!1,model:{},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},confirmLoading:!1,validatorRules:{},url:{add:"/servicefree/serviceFreeMaintain/add",edit:"/servicefree/serviceFreeMaintain/edit"}},u(e,"labelCol",{span:4}),u(e,"wrapperCol",{span:14}),u(e,"other",""),u(e,"form",{freeReductionId:"",freeMoney:"",billNo:"",remarks:"",fileList:[]}),u(e,"rules",{freeReductionId:[{required:!0,message:"请选择减免类型",trigger:"blur"}],freeMoney:[{required:!0,message:"请选输入免金额",trigger:"blur"},{type:"number",message:"仅支持输入小数点后两位",trigger:"blur",transform:function(e){if(e<0&&(e=Math.abs(e)),e){var t=Number(e);return!!/^\d+\.?\d{0,2}$/.test(t)&&t}}}],billNo:[{required:!0,message:"请选择服务费单号",trigger:"blur"}],projectName:[{required:!0,message:"请选择服务费单号",trigger:"blur"}],supplierName:[{required:!0,message:"请选择服务费单号",trigger:"blur"}]}),e},created:function(){},watch:{visible:function(e){e&&this.getSelectList()}},methods:{aggree:function(){var e=this;if(!this.loading){var t={id:this.ClickItem.id};this.loading=!0,Object(n["k"])("/servicefree/serviceFreeMaintain/confirm_pass",t).then((function(t){t.success&&(e.visible=!1,e.$message.success("操作成功！"),e.$emit("ok"),e.loading=!1)})).finally((function(){}))}},getSelectList:function(){var e=this;Object(n["c"])("/basicdata/serviceFreeReduction/queryList").then((function(t){t.success&&t.result&&(e.selectList=t.result)}))},confirmAddItem:function(e){this.freeItem=e,this.form.billNo=e.billNo,this.form.billId=e.id,this.freeItem.accounting=this.freeItem.accountingYear+"年Q"+this.freeItem.accountingQuarter+"季度"},cancelSignModalOk:function(){var e=this;if(!this.noloading){var t={id:this.ClickItem.id,confirmContent:this.confirmContent};this.noloading=!0,Object(n["k"])("/servicefree/serviceFreeMaintain/confirm_no_pass",t).then((function(t){t.success&&(e.visibleModel=!1,setTimeout((function(){e.visible=!1,e.$message.success("操作成功！"),e.$emit("ok"),e.loading=!1}),1e3))})).finally((function(){}))}},cancelSignModal:function(){this.visibleModel=!1},unaggree:function(){this.visibleModel=!0},clickPlus:function(){this.$refs.modalForm.add(),this.$refs.modalForm.title="添加服务费账单",this.$refs.modalForm.disableSubmit=!1},handleChange:function(e){e.file.status,"done"===e.file.status?this.$message.success("".concat(e.file.name," file uploaded successfully")):"error"===e.file.status&&this.$message.error("".concat(e.file.name," file upload failed."))},removeFile:function(e,t){var i=this.fileList,a=this.uploadList;i.forEach((function(t,r){t===e&&(i.splice(r,1),a.splice(r,1))})),this.fileList=i},downloadFilesCustomRequest:function(e){},beforeUpload:function(e,t){var i=this,a=e.size/1024/1024<2;if(!a)return this.$message.error("图片大小超出限制，请修改后重新上传"),!1;var r="/sys/common/upload",l=new FormData;l.append("biz","servicefree"),l.append("file",e),Object(n["l"])(r,l).then((function(e){if(e.success){i.uploadList.push({enclosurePath:e.message,enclosureName:e.result});var t=i.fileList.length;i.fileList.push({uid:t+1,name:e.result,status:"done",url:i.ImagesUrl+e.message})}})).finally((function(){}))},add:function(){this.edit({})},edit:function(e){var t=this;this.ClickItem=e,this.form.freeReductionId=e.freeReductionId,this.form.freeMoney=e.freeMoney,this.form.billNo=e.billNo,this.form.remarks=e.remarks,this.form.id=e.id,this.freeItem.projectName=e.projectName,this.freeItem.supplierName=e.supplierName,e.accountingYear?(this.freeItem.accounting=e.accountingYear+"年Q"+e.accountingQuarter+"季度",this.okTextTit="编辑",this.isEdit=!0):(this.freeItem.accounting="",this.okTextTit="确定",this.isEdit=!1,this.form.id=""),this.freeItem.theoreticalReceivableMoney=e.theoreticalReceivableMoney,this.visible=!0,this.fileList=[];var i=[];this.uploadList=e.fileList?e.fileList:[],e.fileList&&e.fileList.forEach((function(e,a){i.push({uid:a+1,name:e.enclosureName,status:"done",url:t.ImagesUrl+e.enclosurePath})})),this.fileList=i},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;if("编辑"===this.okTextTit&&this.form.id)return this.okTextTit="确定",this.isEdit=!1,!1;var t=this;this.$refs.ruleForm.validate((function(i){if(!i)return!1;t.confirmLoading=!0;var a="",r="";t.form.id?(a+=t.url.edit,r="put"):(a+=t.url.add,r="post"),e.form.fileList=e.uploadList,Object(n["h"])(a,e.form,r).then((function(e){e.success?(t.$message.success(e.message),t.$emit("ok")):t.$message.warning(e.message)})).finally((function(){t.confirmLoading=!1,t.close()}))}))},handleCancel:function(){this.close()},popupCallback:function(e){this.form.setFieldsValue(s()(e,"billId","freeReductionId","freeMoney","remarks","freeState","createBy","createTime","updateBy","updateTime","isDelete"))}}},d=f,m=(i("bdb8"),i("cba8")),h=Object(m["a"])(d,a,r,!1,null,"7aa7f12b",null);t["default"]=h.exports},"85ee":function(e,t,i){(function(t){var i=1/0,a=9007199254740991,r="[object Arguments]",n="[object Function]",l="[object GeneratorFunction]",s="[object Symbol]",o="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=o||c||Function("return this")();function f(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function d(e,t){var i=-1,a=e?e.length:0,r=Array(a);while(++i<a)r[i]=t(e[i],i,e);return r}function m(e,t){var i=-1,a=t.length,r=e.length;while(++i<a)e[r+i]=t[i];return e}var h=Object.prototype,p=h.hasOwnProperty,v=h.toString,b=u.Symbol,g=h.propertyIsEnumerable,y=b?b.isConcatSpreadable:void 0,k=Math.max;function x(e,t,i,a,r){var n=-1,l=e.length;i||(i=C),r||(r=[]);while(++n<l){var s=e[n];t>0&&i(s)?t>1?x(s,t-1,i,a,r):m(r,s):a||(r[r.length]=s)}return r}function w(e,t){return e=Object(e),I(e,t,(function(t,i){return i in e}))}function I(e,t,i){var a=-1,r=t.length,n={};while(++a<r){var l=t[a],s=e[l];i(s,l)&&(n[l]=s)}return n}function S(e,t){return t=k(void 0===t?e.length-1:t,0),function(){var i=arguments,a=-1,r=k(i.length-t,0),n=Array(r);while(++a<r)n[a]=i[t+a];a=-1;var l=Array(t+1);while(++a<t)l[a]=i[a];return l[t]=n,f(e,this,l)}}function C(e){return M(e)||L(e)||!!(y&&e&&e[y])}function N(e){if("string"==typeof e||T(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}function L(e){return F(e)&&p.call(e,"callee")&&(!g.call(e,"callee")||v.call(e)==r)}var M=Array.isArray;function j(e){return null!=e&&_(e.length)&&!$(e)}function F(e){return O(e)&&j(e)}function $(e){var t=R(e)?v.call(e):"";return t==n||t==l}function _(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function R(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function O(e){return!!e&&"object"==typeof e}function T(e){return"symbol"==typeof e||O(e)&&v.call(e)==s}var E=S((function(e,t){return null==e?{}:w(e,d(x(t,1),N))}));e.exports=E}).call(this,i("2409"))},bdb8:function(e,t,i){"use strict";i("d300")},d300:function(e,t,i){}}]);